(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[289],{78278:function(){},16930:function(){},22399:function(){},29371:function(){},93844:function(){},5829:function(){},58606:function(){},22805:function(){},22221:function(){},28192:function(){},77468:function(e,t,n){Promise.resolve().then(n.bind(n,4573))},4573:function(e,t,n){"use strict";n.d(t,{TasksPage:function(){return z}});var a=n(57437),i=n(87138),l=n(2265),s=n(5499),r=n(83184),o=n(69076),c=n(1959),d=n(70132),u=n(99763),h=n(85254),f=n(82277),x=n(96293),j=n(86608),p=n(44945),g=n(76907),y=n(62737),w=n.n(y),b=n(40932),k=n(52651);let m=()=>(0,b.a)({queryKey:["tasks"],queryFn:async()=>(await k.U.get("/tasks")).data});var v=n(69165),D=n(33631),P=n(60327),T=n(76306),C=n(93191),N=n(25524);let S=()=>{let e=(0,C.NL)();return(0,N.D)({mutationFn:async e=>await k.U.delete("/tasks/".concat(e)),onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]})}})};var U=n(11736),q=n(56847),I=n(30106),O=n(61813),A=n(47497),F=n(65203),E=n(17090),W=n(20094),L=n(20085);let Y=()=>{let e=(0,C.NL)();return(0,N.D)({mutationFn:async e=>await k.U.post("/tasks",e),onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]})}})},K=e=>(0,b.a)({queryKey:["tasks",e],enabled:!!e,queryFn:async()=>(await k.U.get("/tasks/".concat(e))).data}),M=()=>{let e=(0,C.NL)();return(0,N.D)({mutationFn:async e=>{let{id:t,data:n}=e;return await k.U.put("/tasks/".concat(t),n)},onSettled:()=>{e.invalidateQueries({queryKey:["tasks"]})}})},_=e=>{let{id:t}=e,{data:n}=K(t),i=(0,A.c)({initialValues:{title:"",status:"PENDING",priority:"LOW",file:"",attachment:null,dueDate:new Date},validate:{title:(0,F.U)("Please enter title"),status:(0,F.U)("Please choose status"),priority:(0,F.U)("Please choose priority"),dueDate:(0,F.U)("Please choose due date")}}),{mutateAsync:s,isPending:r}=Y(),{mutateAsync:o,isPending:c}=M(),u=async e=>{try{if(e.attachment instanceof File){await (0,W.x)({path:e.attachment.name,data:e.attachment,options:{contentType:e.attachment.type}}).result;let t=await (0,L.G)({path:e.attachment.name});e.file=t.url.href||""}let t=n?await o({id:n.id,data:e}):await s(e);if(201===t.status||200===t.status)return g.qk.closeAll(),P.N9.show({color:"green",message:"Create task success",style:{fontWeight:"bold"}});P.N9.show({color:"red",message:"Create task fail",style:{fontWeight:"bold"}})}catch(e){P.N9.show({color:"red",title:"Create task fail",message:null==e?void 0:e.toString(),style:{fontWeight:"bold"}})}};(0,l.useEffect)(()=>{n&&i.setValues({title:n.title,status:n.status,priority:n.priority,dueDate:new Date})},[n]);let f=r||c;return(0,a.jsx)("form",{onSubmit:i.onSubmit(u),children:(0,a.jsxs)(d.K,{children:[(0,a.jsx)(U.o,{label:"Title",placeholder:"Task title",...i.getInputProps("title")},i.key("title")),(0,a.jsx)(q.P,{label:"Status",placeholder:"Please choose value",data:Object.values(E.TaskStatus),defaultValue:"PENDING",...i.getInputProps("status")},i.key("status")),(0,a.jsx)(q.P,{label:"Priority",placeholder:"Please choose priority",defaultValue:"LOW",data:Object.values(E.TaskPriority),...i.getInputProps("priority")},i.key("priority")),(0,a.jsx)(O.W,{label:"Due Date",valueFormat:"YYYY/MM/DD HH:mm:ss",defaultValue:new Date,placeholder:"Please choose due date",...i.getInputProps("dueDate")},i.key("dueDate")),(0,a.jsx)(I.S,{label:"File",placeholder:"Please choose file",...i.getInputProps("attachment")}),(0,a.jsxs)(j.Z,{justify:"end",children:[(0,a.jsx)(h.z,{variant:"outline",color:"white",disabled:f,onClick:()=>g.qk.closeAll(),children:"Cancel"}),(0,a.jsx)(h.z,{bg:"blue",disabled:f,loading:f,type:"submit",children:"Save"})]})]})})},H=[{value:"edit",label:"Edit"},{value:"delete",label:"Delete"}],V=e=>{let{data:t}=e,{mutateAsync:n}=S(),i=(0,v.K)({onDropdownClose:()=>i.resetSelectedOption()}),l=async()=>{try{let e=await n(t.id);if(200===e.status)return P.N9.show({color:"green",message:"Delete task success",style:{fontWeight:"bold"}})}catch(e){P.N9.show({color:"red",title:"Delete task fail",message:null==e?void 0:e.toString(),style:{fontWeight:"bold"}})}},s=e=>"edit"===e?g.qk.open({title:"Update task",children:(0,a.jsx)(_,{id:t.id})}):"delete"===e?g.qk.openConfirmModal({title:"Delete task",children:(0,a.jsx)(x.x,{children:"Are you sure want delete this task?"}),labels:{confirm:"Delete",cancel:"Cancel"},confirmProps:{bg:"red"},onConfirm:l}):void 0,r=H.map(e=>(0,a.jsx)(D.h.Option,{value:e.label,bg:"delete"===e.value?"red":"",onClick:()=>s(e.value),children:e.label},e.value));return(0,a.jsxs)(D.h,{store:i,width:100,withArrow:!0,children:[(0,a.jsx)(D.h.Target,{children:(0,a.jsx)(T.Z,{onClick:()=>i.toggleDropdown()})}),(0,a.jsx)(D.h.Dropdown,{children:(0,a.jsx)(D.h.Options,{children:r})})]})},z=()=>{let{data:e,isLoading:t}=m(),[n,y]=(0,l.useState)(1);if(t)return(0,a.jsx)(s.f,{visible:t,zIndex:1e3,overlayProps:{radius:"sm",blur:2}});let b=e=>{switch(e){case"PENDING":return(0,a.jsx)(r.C,{bg:"blue",children:e});case"DONE":return(0,a.jsx)(r.C,{bg:"green",children:e});default:return(0,a.jsx)(a.Fragment,{})}},k=e=>{switch(e){case"LOW":return(0,a.jsx)(r.C,{bg:"blue",children:e});case"MEDIUM":return(0,a.jsx)(r.C,{bg:"yellow",children:e});case"HIGH":return(0,a.jsx)(r.C,{bg:"red",children:e});default:return(0,a.jsx)(a.Fragment,{})}};return(0,a.jsx)(o.k,{h:"100%",bg:"dark",pt:20,children:(0,a.jsx)(c.W,{w:"100%",children:(0,a.jsxs)(d.K,{children:[(0,a.jsx)(u.D,{children:"Task List"}),(0,a.jsx)(h.z,{w:"fit-content",ml:"auto",bg:"blue",onClick:()=>g.qk.open({title:"Create new task",children:(0,a.jsx)(_,{})}),children:"+ Add Task"}),(0,a.jsxs)(f.i,{border:1,withTableBorder:!0,withColumnBorders:!0,children:[(0,a.jsx)(f.i.Thead,{children:(0,a.jsxs)(f.i.Tr,{fw:"bold",children:[(0,a.jsx)(f.i.Td,{align:"center",w:10,children:"Index"}),(0,a.jsx)(f.i.Td,{w:200,children:"Title"}),(0,a.jsx)(f.i.Td,{align:"center",children:"File"}),(0,a.jsx)(f.i.Td,{align:"center",children:"Status"}),(0,a.jsx)(f.i.Td,{align:"center",children:"Priority"}),(0,a.jsx)(f.i.Td,{align:"center",children:"Due Date"}),(0,a.jsx)(f.i.Td,{align:"center",children:"Actions"})]})}),(0,a.jsxs)(f.i.Tbody,{children:[!(null==e?void 0:e.length)&&(0,a.jsx)(f.i.Tr,{children:(0,a.jsx)(f.i.Td,{ta:"center",py:20,colSpan:5,children:(0,a.jsx)(x.x,{fw:"bold",children:"You dont have any task. Please add one"})})}),(e||[]).slice((n-1)*15,15*n).map((e,t)=>(0,a.jsxs)(f.i.Tr,{children:[(0,a.jsx)(f.i.Td,{align:"center",children:(n-1)*15+t+1}),(0,a.jsx)(f.i.Td,{maw:150,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.title}),(0,a.jsx)(f.i.Td,{align:"center",maw:200,style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:e.file?(0,a.jsx)(i.default,{target:"_blank",href:e.file,children:(0,a.jsx)(x.x,{fw:700,c:"blue",children:"View"})}):"-"}),(0,a.jsx)(f.i.Td,{align:"center",children:b(e.status)}),(0,a.jsx)(f.i.Td,{align:"center",children:k(e.priority)}),(0,a.jsx)(f.i.Td,{align:"center",children:w()(e.dueDate).format("YYYY/MM/DD HH:mm:ss").toString()}),(0,a.jsx)(f.i.Td,{align:"center",children:(0,a.jsx)(V,{data:e})})]},e.id))]})]}),(0,a.jsx)(j.Z,{justify:"end",children:(0,a.jsx)(p.t,{value:n,onChange:e=>y(e),total:Math.ceil(((null==e?void 0:e.length)||0)/15)})})]})})})}},52651:function(e,t,n){"use strict";n.d(t,{U:function(){return l},o:function(){return s}});var a=n(38472),i=n(20357);let l=a.Z.create({baseURL:"".concat(i.env.API_URL||"","/api")});l.interceptors.request.use(function(e){return e},function(e){return Promise.reject(e)}),l.interceptors.response.use(function(e){return e},function(e){return Promise.reject(e)});let s=e=>{l.defaults.headers.Authorization="Bearer ".concat(e)}}},function(e){e.O(0,[501,630,283,788,332,971,23,744],function(){return e(e.s=77468)}),_N_E=e.O()}]);