"use strict";(()=>{var e={};e.id=495,e.ids=[495],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},88364:(e,t,i)=>{let n;i.r(t),i.d(t,{originalPathname:()=>t8,patchFetch:()=>t7,requestAsyncStorage:()=>t4,routeModule:()=>t3,serverHooks:()=>t6,staticGenerationAsyncStorage:()=>t5});var o,r,s,a,u,d,c,l,h,g,f,p,y,m,I,w,S,v={};i.r(v),i.d(v,{GET:()=>t1,POST:()=>t2});var C=i(49303),A=i(88716),k=i(60670),b=i(87070),E=i(53524),P=i(94458);!function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(o||(o={}));let T={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class _{constructor(e,t=o.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){let e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e&&(this._config=e),this._config}_log(e,...t){let i=this.level;_.LOG_LEVEL&&(i=_.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(i=window.LOG_LEVEL);let n=T[i];if(!(T[e]>=n))return;let r=console.log.bind(console);e===o.ERROR&&console.error&&(r=console.error.bind(console)),e===o.WARN&&console.warn&&(r=console.warn.bind(console)),_.BIND_ALL_LOG_LEVELS&&(e===o.INFO&&console.info&&(r=console.info.bind(console)),e===o.DEBUG&&console.debug&&(r=console.debug.bind(console)));let s=`[${e}] ${this._ts()} ${this.name}`,a="";if(1===t.length&&"string"==typeof t[0])r(a=`${s} - ${t[0]}`);else if(1===t.length)a=`${s} ${t[0]}`,r(s,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),a=`${s} - ${t[0]} ${e}`,r(`${s} - ${t[0]}`,e)}else a=`${s} ${t}`,r(s,t);for(let e of this._pluggables){let t={message:a,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(o.INFO,...e)}info(...e){this._log(o.INFO,...e)}warn(...e){this._log(o.WARN,...e)}error(...e){this._log(o.ERROR,...e)}debug(...e){this._log(o.DEBUG,...e)}verbose(...e){this._log(o.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}_.LOG_LEVEL=null,_.BIND_ALL_LOG_LEVELS=!1;class x extends Error{constructor({message:e,name:t,recoverySuggestion:i,underlyingError:n}){super(e),this.name=t,this.underlyingError=n,this.recoverySuggestion=i,this.constructor=x,Object.setPrototypeOf(this,x.prototype)}}let O="undefined"!=typeof Symbol?Symbol("amplify_default"):"@@amplify_default",R=new _("Hub");class U{constructor(e){this.listeners=new Map,this.protectedChannels=["core","auth","api","analytics","interactions","pubsub","storage","ui","xr"],this.name=e}_remove(e,t){let i=this.listeners.get(e);if(!i){R.warn(`No listeners for ${e}`);return}this.listeners.set(e,[...i.filter(({callback:e})=>e!==t)])}dispatch(e,t,i,n){"string"==typeof e&&this.protectedChannels.indexOf(e)>-1&&n!==O&&R.warn(`WARNING: ${e} is protected and dispatching on it can have unintended consequences`);let o={channel:e,payload:{...t},source:i,patternInfo:[]};try{this._toListeners(o)}catch(e){R.error(e)}}listen(e,t,i="noname"){if("function"!=typeof t)throw new x({name:"NoHubcallbackProvidedException",message:"No callback supplied to Hub"});let n=this.listeners.get(e);return n||(n=[],this.listeners.set(e,n)),n.push({name:i,callback:t}),()=>{this._remove(e,t)}}_toListeners(e){let{channel:t,payload:i}=e,n=this.listeners.get(t);n&&n.forEach(n=>{R.debug(`Dispatching to ${t} with `,i);try{n.callback(e)}catch(e){R.error(e)}})}}let N=new U("__default__");new U("internal-hub");let L=e=>{for(let t of Reflect.ownKeys(e)){let i=e[t];(i&&"object"==typeof i||"function"==typeof i)&&L(i)}return Object.freeze(e)},K=Symbol("oauth-listener"),D=new _("parseAWSExports"),V={API_KEY:"apiKey",AWS_IAM:"iam",AMAZON_COGNITO_USER_POOLS:"userPool",OPENID_CONNECT:"oidc",NONE:"none",AWS_LAMBDA:"lambda",LAMBDA:"lambda"},M=(e={})=>{if(!Object.prototype.hasOwnProperty.call(e,"aws_project_region"))throw new x({name:"InvalidParameterException",message:"Invalid config parameter.",recoverySuggestion:"Ensure passing the config object imported from  `amplifyconfiguration.json`."});let{aws_appsync_apiKey:t,aws_appsync_authenticationType:i,aws_appsync_graphqlEndpoint:n,aws_appsync_region:o,aws_bots_config:r,aws_cognito_identity_pool_id:s,aws_cognito_sign_up_verification_method:a,aws_cognito_mfa_configuration:u,aws_cognito_mfa_types:d,aws_cognito_password_protection_settings:c,aws_cognito_verification_mechanisms:l,aws_cognito_signup_attributes:h,aws_cognito_social_providers:g,aws_cognito_username_attributes:f,aws_mandatory_sign_in:p,aws_mobile_analytics_app_id:y,aws_mobile_analytics_app_region:m,aws_user_files_s3_bucket:I,aws_user_files_s3_bucket_region:w,aws_user_files_s3_dangerously_connect_to_http_endpoint_for_testing:S,aws_user_pools_id:v,aws_user_pools_web_client_id:C,geo:A,oauth:k,predictions:b,aws_cloud_logic_custom:E,Notifications:P,modelIntrospection:T}=e,_={};y&&(_.Analytics={Pinpoint:{appId:y,region:m}});let{InAppMessaging:O,Push:R}=P??{};if(O?.AWSPinpoint||R?.AWSPinpoint){if(O?.AWSPinpoint){let{appId:e,region:t}=O.AWSPinpoint;_.Notifications={InAppMessaging:{Pinpoint:{appId:e,region:t}}}}if(R?.AWSPinpoint){let{appId:e,region:t}=R.AWSPinpoint;_.Notifications={..._.Notifications,PushNotification:{Pinpoint:{appId:e,region:t}}}}}if(Array.isArray(r)&&(_.Interactions={LexV1:Object.fromEntries(r.map(e=>[e.name,e]))}),n){let e=V[i];e||D.debug(`Invalid authentication type ${i}. Falling back to IAM.`),_.API={GraphQL:{endpoint:n,apiKey:t,region:o,defaultAuthMode:e??"iam"}},T&&(_.API.GraphQL.modelIntrospection=T)}let U=u?{status:u&&u.toLowerCase(),totpEnabled:d?.includes("TOTP")??!1,smsEnabled:d?.includes("SMS")??!1}:void 0,N=c?{minLength:c.passwordPolicyMinLength,requireLowercase:c.passwordPolicyCharacters?.includes("REQUIRES_LOWERCASE")??!1,requireUppercase:c.passwordPolicyCharacters?.includes("REQUIRES_UPPERCASE")??!1,requireNumbers:c.passwordPolicyCharacters?.includes("REQUIRES_NUMBERS")??!1,requireSpecialCharacters:c.passwordPolicyCharacters?.includes("REQUIRES_SYMBOLS")??!1}:void 0,L=Array.from(new Set([...l??[],...h??[]])).reduce((e,t)=>({...e,[t.toLowerCase()]:{required:!0}}),{}),K=f?.includes("EMAIL")??!1,M=f?.includes("PHONE_NUMBER")??!1;(s||v)&&(_.Auth={Cognito:{identityPoolId:s,allowGuestAccess:"enable"!==p,signUpVerificationMethod:a,userAttributes:L,userPoolClientId:C,userPoolId:v,mfa:U,passwordFormat:N,loginWith:{username:!(K||M),email:K,phone:M}}});let G=!!k&&Object.keys(k).length>0,F=!!g&&g.length>0;if(_.Auth&&G&&(_.Auth.Cognito.loginWith={..._.Auth.Cognito.loginWith,oauth:{...$(k),...F&&{providers:j(g)}}}),I&&(_.Storage={S3:{bucket:I,region:w,dangerouslyConnectToHttpEndpointForTesting:S}}),A){let{amazon_location_service:e}=A;_.Geo={LocationService:{maps:e.maps,geofenceCollections:e.geofenceCollections,searchIndices:e.search_indices,region:e.region}}}if(E&&(_.API={..._.API,REST:E.reduce((e,t)=>{let{name:i,endpoint:n,region:o,service:r}=t;return{...e,[i]:{endpoint:n,...r?{service:r}:void 0,...o?{region:o}:void 0}}},{})}),b){let{VoiceId:e}=b?.convert?.speechGenerator?.defaults??{};_.Predictions=e?{...b,convert:{...b.convert,speechGenerator:{...b.convert.speechGenerator,defaults:{voiceId:e}}}}:b}return _},G=e=>e?.split(",")??[],$=({domain:e,scope:t,redirectSignIn:i,redirectSignOut:n,responseType:o})=>({domain:e,scopes:t,redirectSignIn:G(i),redirectSignOut:G(n),responseType:o}),j=e=>e.map(e=>{let t=e.toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)}),F={AMAZON_COGNITO_USER_POOLS:"userPool",API_KEY:"apiKey",AWS_IAM:"iam",AWS_LAMBDA:"lambda",OPENID_CONNECT:"oidc"},q={GOOGLE:"Google",LOGIN_WITH_AMAZON:"Amazon",FACEBOOK:"Facebook",SIGN_IN_WITH_APPLE:"Apple"},B=e=>Object.keys(e).some(e=>e.startsWith("aws_"))?M(e):!function(e){let{version:t}=e;return!!t&&t.startsWith("1")}(e)?e:function(e){let t={};return e.storage&&(t.Storage=function(e){if(!e)return;let{bucket_name:t,aws_region:i}=e;return{S3:{bucket:t,region:i}}}(e.storage)),e.auth&&(t.Auth=function(e){if(!e)return;let{user_pool_id:t,user_pool_client_id:i,identity_pool_id:n,password_policy:o,mfa_configuration:r,mfa_methods:s,unauthenticated_identities_enabled:a,oauth:u,username_attributes:d,standard_required_attributes:c}=e,l={Cognito:{userPoolId:t,userPoolClientId:i}};return n&&(l.Cognito={...l.Cognito,identityPoolId:n}),o&&(l.Cognito.passwordFormat={requireLowercase:o.require_lowercase,requireNumbers:o.require_numbers,requireUppercase:o.require_uppercase,requireSpecialCharacters:o.require_symbols,minLength:o.min_length??6}),r&&(l.Cognito.mfa={status:"OPTIONAL"===r?"optional":"REQUIRED"===r?"on":"off",smsEnabled:s?.includes("SMS"),totpEnabled:s?.includes("TOTP")}),a&&(l.Cognito.allowGuestAccess=a),u&&(l.Cognito.loginWith={oauth:{domain:u.domain,redirectSignIn:u.redirect_sign_in_uri,redirectSignOut:u.redirect_sign_out_uri,responseType:"token"===u.response_type?"token":"code",scopes:u.scopes,providers:function(e=[]){return e.reduce((e,t)=>(void 0!==q[t]&&e.push(q[t]),e),[])}(u.identity_providers)}}),d&&(l.Cognito.loginWith={...l.Cognito.loginWith,email:d.includes("email"),phone:d.includes("phone_number"),username:d.includes("username")}),c&&(l.Cognito.userAttributes=c.reduce((e,t)=>({...e,[t]:{required:!0}}),{})),l}(e.auth)),e.analytics&&(t.Analytics=function(e){if(!e?.amazon_pinpoint)return;let{amazon_pinpoint:t}=e;return{Pinpoint:{appId:t.app_id,region:t.aws_region}}}(e.analytics)),e.geo&&(t.Geo=function(e){if(!e)return;let{aws_region:t,geofence_collections:i,maps:n,search_indices:o}=e;return{LocationService:{region:t,searchIndices:o,geofenceCollections:i,maps:n}}}(e.geo)),e.data&&(t.API=function(e){if(!e)return;let{aws_region:t,default_authorization_type:i,url:n,api_key:o,model_introspection:r}=e;return{GraphQL:{endpoint:n,defaultAuthMode:F[i],region:t,apiKey:o,modelIntrospection:r}}}(e.data)),e.notifications&&(t.Notifications=function(e){if(!e)return;let{aws_region:t,channels:i,amazon_pinpoint_app_id:n}=e,o=i.includes("IN_APP_MESSAGING"),r=i.includes("APNS")||i.includes("FCM");if(!(o||r))return;let s={};return o&&(s.InAppMessaging={Pinpoint:{appId:n,region:t}}),r&&(s.PushNotification={Pinpoint:{appId:n,region:t}}),s}(e.notifications)),t}(e);function W({expiresAt:e,clockDrift:t}){return Date.now()+t>e}class z{configure(e,t){this.authConfig=e,this.authOptions=t}async fetchAuthSession(e={}){let t,i;let n=await this.getTokens(e);return n?(i=n.accessToken?.payload?.sub,t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,tokens:n,authenticated:!0,forceRefresh:e.forceRefresh})):t=await this.authOptions?.credentialsProvider?.getCredentialsAndIdentityId({authConfig:this.authConfig,authenticated:!1,forceRefresh:e.forceRefresh}),{tokens:n,credentials:t?.credentials,identityId:t?.identityId,userSub:i}}async clearCredentials(){await this.authOptions?.credentialsProvider?.clearCredentialsAndIdentityId()}async getTokens(e){return await this.authOptions?.tokenProvider?.getTokens(e)??void 0}}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var H=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),J=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],Q=function(){function e(){this.state=Int32Array.from(J),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return e.prototype.update=function(e){if(this.finished)throw Error("Attempted to update an already finished hash.");var t=0,i=e.byteLength;if(this.bytesHashed+=i,8*this.bytesHashed>9007199254740991)throw Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=e[t++],i--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0)},e.prototype.digest=function(){if(!this.finished){var e=8*this.bytesHashed,t=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(t.setUint8(this.bufferLength++,128),i%64>=56){for(var n=this.bufferLength;n<64;n++)t.setUint8(n,0);this.hashBuffer(),this.bufferLength=0}for(var n=this.bufferLength;n<56;n++)t.setUint8(n,0);t.setUint32(56,Math.floor(e/4294967296),!0),t.setUint32(60,e),this.hashBuffer(),this.finished=!0}for(var o=new Uint8Array(32),n=0;n<8;n++)o[4*n]=this.state[n]>>>24&255,o[4*n+1]=this.state[n]>>>16&255,o[4*n+2]=this.state[n]>>>8&255,o[4*n+3]=this.state[n]>>>0&255;return o},e.prototype.hashBuffer=function(){for(var e=this.buffer,t=this.state,i=t[0],n=t[1],o=t[2],r=t[3],s=t[4],a=t[5],u=t[6],d=t[7],c=0;c<64;c++){if(c<16)this.temp[c]=(255&e[4*c])<<24|(255&e[4*c+1])<<16|(255&e[4*c+2])<<8|255&e[4*c+3];else{var l=this.temp[c-2],h=(l>>>17|l<<15)^(l>>>19|l<<13)^l>>>10,g=((l=this.temp[c-15])>>>7|l<<25)^(l>>>18|l<<14)^l>>>3;this.temp[c]=(h+this.temp[c-7]|0)+(g+this.temp[c-16]|0)}var f=(((s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7))+(s&a^~s&u)|0)+(d+(H[c]+this.temp[c]|0)|0)|0,p=((i>>>2|i<<30)^(i>>>13|i<<19)^(i>>>22|i<<10))+(i&n^i&o^n&o)|0;d=u,u=a,a=s,s=r+f|0,r=o,o=n,n=i,i=f+p|0}t[0]+=i,t[1]+=n,t[2]+=o,t[3]+=r,t[4]+=s,t[5]+=a,t[6]+=u,t[7]+=d},e}(),Y=i(14300);let X=(e,t)=>{if("string"!=typeof e)throw TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?Y.Buffer.from(e,t):Y.Buffer.from(e)};var Z="undefined"!=typeof Buffer&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:e=>{let t=X(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};function ee(e){return e instanceof Uint8Array?e:"string"==typeof e?Z(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}(function(){function e(e){this.secret=e,this.hash=new Q,this.reset()}e.prototype.update=function(e){if(("string"==typeof e?0!==e.length:0!==e.byteLength)&&!this.error)try{this.hash.update(ee(e))}catch(e){this.error=e}},e.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},e.prototype.digest=function(){var e,t,i,n;return e=this,t=void 0,i=void 0,n=function(){return function(e,t){var i,n,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(a){return function(u){return function(a){if(i)throw TypeError("Generator is already executing.");for(;r&&(r=0,a[0]&&(s=0)),s;)try{if(i=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return s.label++,{value:a[1],done:!1};case 5:s.label++,n=a[1],a=[0];continue;case 7:a=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){s=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){s.label=a[1];break}if(6===a[0]&&s.label<o[1]){s.label=o[1],o=a;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(a);break}o[2]&&s.ops.pop(),s.trys.pop();continue}a=t.call(e,s)}catch(e){a=[6,e],n=0}finally{i=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}(this,function(e){return[2,this.digestSync()]})},new(i||(i=Promise))(function(o,r){function s(e){try{u(n.next(e))}catch(e){r(e)}}function a(e){try{u(n.throw(e))}catch(e){r(e)}}function u(e){var t;e.done?o(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(s,a)}u((n=n.apply(e,t||[])).next())})},e.prototype.reset=function(){if(this.hash=new Q,this.secret){this.outer=new Q;var e=function(e){var t=ee(e);if(t.byteLength>64){var i=new Q;i.update(t),t=i.digest()}var n=new Uint8Array(64);return n.set(t),n}(this.secret),t=new Uint8Array(64);t.set(e);for(var i=0;i<64;i++)e[i]^=54,t[i]^=92;this.hash.update(e),this.outer.update(t);for(var i=0;i<e.byteLength;i++)e[i]=0}}})();let et={},ei={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();1===t.length&&(t=`0${t}`),et[e]=t,ei[t]=e}class en{constructor(){this.oAuthListener=void 0,this.resourcesConfig={},this.libraryOptions={},this.Auth=new z}configure(e,t){let i=B(e);this.resourcesConfig=i,t&&(this.libraryOptions=t),this.resourcesConfig=L(this.resourcesConfig),this.Auth.configure(this.resourcesConfig.Auth,this.libraryOptions.Auth),N.dispatch("core",{event:"configure",data:this.resourcesConfig},"Configure",O),this.notifyOAuthListener()}getConfig(){return this.resourcesConfig}[K](e){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth?e(this.resourcesConfig.Auth?.Cognito):this.oAuthListener=e}notifyOAuthListener(){this.resourcesConfig.Auth?.Cognito.loginWith?.oauth&&this.oAuthListener&&(this.oAuthListener(this.resourcesConfig.Auth?.Cognito),this.oAuthListener=void 0)}}let eo=new en;/*! js-cookie v3.0.5 | MIT */function er(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}var es=function e(t,i){function n(e,n,o){if("undefined"!=typeof document){"number"==typeof(o=er({},i,o)).expires&&(o.expires=new Date(Date.now()+864e5*o.expires)),o.expires&&(o.expires=o.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var r="";for(var s in o)o[s]&&(r+="; "+s,!0!==o[s]&&(r+="="+o[s].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+r}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},o=0;o<i.length;o++){var r=i[o].split("="),s=r.slice(1).join("=");try{var a=decodeURIComponent(r[0]);if(n[a]=t.read(s,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",er({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,er({},this.attributes,t))},withConverter:function(t){return e(er({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});class ea{constructor(e={}){let{path:t,domain:i,expires:n,sameSite:o,secure:r}=e;if(this.domain=i,this.path=t||"/",this.expires=Object.prototype.hasOwnProperty.call(e,"expires")?n:365,this.secure=!Object.prototype.hasOwnProperty.call(e,"secure")||r,Object.prototype.hasOwnProperty.call(e,"sameSite")){if(!o||!["strict","lax","none"].includes(o))throw Error('The sameSite value of cookieStorage must be "lax", "strict" or "none".');if("none"===o&&!this.secure)throw Error("sameSite = None requires the Secure attribute in latest browser versions.");this.sameSite=o}}async setItem(e,t){es.set(e,t,this.getData())}async getItem(e){return es.get(e)??null}async removeItem(e){es.remove(e,this.getData())}async clear(){let e=Object.keys(es.get()).map(e=>this.removeItem(e));await Promise.all(e)}getData(){return{path:this.path,expires:this.expires,domain:this.domain,secure:this.secure,...this.sameSite&&{sameSite:this.sameSite}}}}!function(e){e.NoEndpointId="NoEndpointId",e.PlatformNotSupported="PlatformNotSupported",e.Unknown="Unknown"}(r||(r={}));class eu extends x{constructor(){super({name:r.PlatformNotSupported,message:"Function not supported on current platform"})}}class ed{constructor(e){this.storage=e}async setItem(e,t){if(!this.storage)throw new eu;this.storage.setItem(e,t)}async getItem(e){if(!this.storage)throw new eu;return this.storage.getItem(e)}async removeItem(e){if(!this.storage)throw new eu;this.storage.removeItem(e)}async clear(){if(!this.storage)throw new eu;this.storage.clear()}}class ec{constructor(){this.storage=new Map}get length(){return this.storage.size}key(e){return e>this.length-1?null:Array.from(this.storage.keys())[e]}setItem(e,t){this.storage.set(e,t)}getItem(e){return this.storage.get(e)??null}removeItem(e){this.storage.delete(e)}clear(){this.storage.clear()}}let el=()=>"undefined"!=typeof window&&window.localStorage?window.localStorage:new ec,eh=()=>"undefined"!=typeof window&&window.sessionStorage?window.sessionStorage:new ec;class eg extends ed{constructor(){super(el())}}class ef extends ed{constructor(){super(eh())}}let ep=new eg;new ef,new ed(new ec);let ey=()=>{if("undefined"!=typeof window&&"function"==typeof window.atob)return window.atob;if("function"==typeof atob)return atob;throw new x({name:"Base64EncoderError",message:"Cannot resolve the `atob` function from the environment."})},em={convert:e=>ey()(e)},eI=(e,t=x)=>(i,n,o)=>{let{message:r,recoverySuggestion:s}=e[n];if(!i)throw new t({name:n,message:o?`${r} ${o}`:r,recoverySuggestion:s})};!function(e){e.AuthTokenConfigException="AuthTokenConfigException",e.AuthUserPoolAndIdentityPoolException="AuthUserPoolAndIdentityPoolException",e.AuthUserPoolException="AuthUserPoolException",e.InvalidIdentityPoolIdException="InvalidIdentityPoolIdException",e.OAuthNotConfigureException="OAuthNotConfigureException"}(s||(s={}));let ew=eI({[s.AuthTokenConfigException]:{message:"Auth Token Provider not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app."},[s.AuthUserPoolAndIdentityPoolException]:{message:"Auth UserPool or IdentityPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with UserPoolId and IdentityPoolId."},[s.AuthUserPoolException]:{message:"Auth UserPool not configured.",recoverySuggestion:"Make sure to call Amplify.configure in your app with userPoolId and userPoolClientId."},[s.InvalidIdentityPoolIdException]:{message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."},[s.OAuthNotConfigureException]:{message:"oauth param not configured.",recoverySuggestion:"Make sure to call Amplify.configure with oauth parameter in your app."}});function eS(e){ew(!!e&&!!e.userPoolId&&!!e.userPoolClientId,s.AuthUserPoolException)}function ev(e){ew(!!e?.identityPoolId,s.InvalidIdentityPoolIdException)}function eC(e){let t=e.split(".");if(3!==t.length)throw Error("Invalid token");try{let i=t[1].replace(/-/g,"+").replace(/_/g,"/"),n=decodeURIComponent(em.convert(i).split("").map(e=>`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`).join("")),o=JSON.parse(n);return{toString:()=>e,payload:o}}catch(e){throw Error("Invalid token payload")}}let eA=(e,t,i,n)=>async(o,r)=>{let s={...n,...o},a=await s.endpointResolver(s,r),u=await t(r,a);return i(await e(u,{...s}))},ek=e=>{let{headers:t,statusCode:i}=e;return{...eb(e)?e.$metadata:{},httpStatusCode:i,requestId:t["x-amzn-requestid"]??t["x-amzn-request-id"]??t["x-amz-request-id"],extendedRequestId:t["x-amz-id-2"],cfId:t["x-amz-cf-id"]}},eb=e=>"object"==typeof e?.$metadata,eE=async e=>{if(!e||e.statusCode<300)return;let t=await eP(e),i=(e=>{let[t]=e.toString().split(/[,:]+/);return t.includes("#")?t.split("#")[1]:t})(e.headers["x-amzn-errortype"]??t.code??t.__type??"UnknownError");return Object.assign(Error(t.message??t.Message??"Unknown error"),{name:i,$metadata:ek(e)})},eP=async e=>{if(!e.body)throw Error("Missing response payload");return Object.assign(await e.body.json(),{$metadata:ek(e)})};class eT extends x{constructor(e){super(e),this.constructor=eT,Object.setPrototypeOf(this,eT.prototype)}}function e_(e){if(!e||"Error"===e.name||e instanceof TypeError)throw new eT({name:r.Unknown,message:"An unknown error has occurred.",underlyingError:e})}let ex={id:"aws",outputs:{dnsSuffix:"amazonaws.com"},regionRegex:"^(us|eu|ap|sa|ca|me|af)\\-\\w+\\-\\d+$",regions:["aws-global"]},eO={partitions:[ex,{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn"},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:["aws-cn-global"]}]},eR=e=>{let{partitions:t}=eO;for(let{regions:i,outputs:n,regionRegex:o}of t){let t=new RegExp(o);if(i.includes(e)||t.test(e))return n.dnsSuffix}return ex.outputs.dnsSuffix},eU=3,eN=(e,t)=>{let i,n;if(t?.aborted)return Promise.resolve();let o=new Promise(t=>{n=t,i=setTimeout(t,e)});return t?.addEventListener("abort",function e(o){clearTimeout(i),t?.removeEventListener("abort",e),n()}),o},eL=(e,t)=>{"[object Object]"===Object.prototype.toString.call(e)&&(e.$metadata={...e.$metadata??{},attempts:t})},eK=(e,t)=>(i,n)=>{let o={},r=t=>e(t,n);for(let e=t.length-1;e>=0;e--)r=(0,t[e])(n)(r,o);return r(i)},eD=e=>{let t;return()=>(t||(t=e()),t)},eV=e=>!["HEAD","GET","DELETE"].includes(e.toUpperCase()),eM=eK(async({url:e,method:t,headers:i,body:n},{abortSignal:o,cache:r,withCrossDomainCredentials:s})=>{let a;try{a=await fetch(e,{method:t,headers:i,body:eV(t)?n:void 0,signal:o,cache:r,credentials:s?"include":"same-origin"})}catch(e){if(e instanceof TypeError)throw Error("Network error");throw e}let u={};a.headers?.forEach((e,t)=>{u[t.toLowerCase()]=e});let d={statusCode:a.status,headers:u,body:null},c=Object.assign(a.body??{},{text:eD(()=>a.text()),blob:eD(()=>a.blob()),json:eD(()=>a.json())});return{...d,body:c}},[({userAgentHeader:e="x-amz-user-agent",userAgentValue:t=""})=>i=>async function(n){if(0===t.trim().length)return await i(n);{let o=e.toLowerCase();return n.headers[o]=n.headers[o]?`${n.headers[o]} ${t}`:t,await i(n)}},({maxAttempts:e=eU,retryDecider:t,computeDelay:i,abortSignal:n})=>{if(e<1)throw Error("maxAttempts must be greater than 0");return(o,r)=>async function(s){let a,u;let d=r.attemptsCount??0,c=()=>{if(u)return eL(u,d),u;throw eL(a,d),a};for(;!n?.aborted&&d<e;){try{u=await o(s),a=void 0}catch(e){a=e,u=void 0}if(d=(r.attemptsCount??0)>d?r.attemptsCount??0:d+1,r.attemptsCount=d,!await t(u,a))return c();if(!n?.aborted&&d<e){let e=i(d);await eN(e,n)}}if(!n?.aborted)return c();throw Error("Request aborted.")}}]),eG=["AuthFailure","InvalidSignatureException","RequestExpired","RequestInTheFuture","RequestTimeTooSkewed","SignatureDoesNotMatch","BadRequestException"],e$=e=>!!e&&eG.includes(e),ej=e=>async(t,i)=>{let n=i??await e(t)??void 0,o=n?.code||n?.name,r=t?.statusCode;return eW(i)||eB(r,o)||e$(o)||ez(r,o)},eF=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException"],eq=["TimeoutError","RequestTimeout","RequestTimeoutException"],eB=(e,t)=>429===e||!!t&&eF.includes(t),eW=e=>e?.name==="Network error",ez=(e,t)=>!!e&&[500,502,503,504].includes(e)||!!t&&eq.includes(t),eH=e=>{let t=(function(e=3e5){return t=>{let i=2**t*100+100*Math.random();return!(i>e)&&i}})(3e5)(e);return!1===t?3e5:t},eJ=URL;(function(e){e.WebUnknown="0",e.React="1",e.NextJs="2",e.Angular="3",e.VueJs="4",e.Nuxt="5",e.Svelte="6",e.ServerSideUnknown="100",e.ReactSSR="101",e.NextJsSSR="102",e.AngularSSR="103",e.VueJsSSR="104",e.NuxtSSR="105",e.SvelteSSR="106",e.ReactNative="201",e.Expo="202"})(a||(a={})),function(e){e.API="api",e.Auth="auth",e.Analytics="analytics",e.DataStore="datastore",e.Geo="geo",e.InAppMessaging="inappmessaging",e.Interactions="interactions",e.Predictions="predictions",e.PubSub="pubsub",e.PushNotification="pushnotification",e.Storage="storage"}(u||(u={})),function(e){e.Record="1",e.IdentifyUser="2"}(d||(d={})),function(e){e.GraphQl="1",e.Get="2",e.Post="3",e.Put="4",e.Patch="5",e.Del="6",e.Head="7"}(c||(c={})),function(e){e.SignUp="1",e.ConfirmSignUp="2",e.ResendSignUpCode="3",e.SignIn="4",e.FetchMFAPreference="6",e.UpdateMFAPreference="7",e.SetUpTOTP="10",e.VerifyTOTPSetup="11",e.ConfirmSignIn="12",e.DeleteUserAttributes="15",e.DeleteUser="16",e.UpdateUserAttributes="17",e.FetchUserAttributes="18",e.ConfirmUserAttribute="22",e.SignOut="26",e.UpdatePassword="27",e.ResetPassword="28",e.ConfirmResetPassword="29",e.FederatedSignIn="30",e.RememberDevice="32",e.ForgetDevice="33",e.FetchDevices="34",e.SendUserAttributeVerificationCode="35",e.SignInWithRedirect="36"}(l||(l={})),function(e){e.Subscribe="1",e.GraphQl="2"}(h||(h={})),function(e){e.SearchByText="0",e.SearchByCoordinates="1",e.SearchForSuggestions="2",e.SearchByPlaceId="3",e.SaveGeofences="4",e.GetGeofence="5",e.ListGeofences="6",e.DeleteGeofences="7"}(g||(g={})),function(e){e.SyncMessages="1",e.IdentifyUser="2",e.NotifyMessageInteraction="3"}(f||(f={})),(p||(p={})).None="0",function(e){e.Convert="1",e.Identify="2",e.Interpret="3"}(y||(y={})),(m||(m={})).Subscribe="1",function(e){e.InitializePushNotifications="1",e.IdentifyUser="2"}(I||(I={})),function(e){e.UploadData="1",e.DownloadData="2",e.List="3",e.Copy="4",e.Remove="5",e.GetProperties="6",e.GetUrl="7"}(w||(w={}));let eQ="6.4.3",eY=()=>"undefined"!=typeof global,eX=()=>"undefined"!=typeof window,eZ=()=>"undefined"!=typeof document,e0=()=>"undefined"!=typeof process,e1=(e,t)=>!!Object.keys(e).find(e=>e.startsWith(t)),e2=[{platform:a.Expo,detectionMethod:function(){return eY()&&void 0!==global.expo}},{platform:a.ReactNative,detectionMethod:function(){return"undefined"!=typeof navigator&&void 0!==navigator.product&&"ReactNative"===navigator.product}},{platform:a.NextJs,detectionMethod:function(){return eX()&&window.next&&"object"==typeof window.next}},{platform:a.Nuxt,detectionMethod:function(){return eX()&&(void 0!==window.__NUXT__||void 0!==window.$nuxt)}},{platform:a.Angular,detectionMethod:function(){let e=!!(eZ()&&document.querySelector("[ng-version]")),t=!!(eX()&&void 0!==window.ng);return e||t}},{platform:a.React,detectionMethod:function(){let e=e=>e.startsWith("_react")||e.startsWith("__react");return eZ()&&Array.from(document.querySelectorAll("[id]")).some(t=>Object.keys(t).find(e))}},{platform:a.VueJs,detectionMethod:function(){return eX()&&e1(window,"__VUE")}},{platform:a.Svelte,detectionMethod:function(){return eX()&&e1(window,"__SVELTE")}},{platform:a.WebUnknown,detectionMethod:function(){return eX()}},{platform:a.NextJsSSR,detectionMethod:function(){return eY()&&(e1(global,"__next")||e1(global,"__NEXT"))}},{platform:a.NuxtSSR,detectionMethod:function(){return eY()&&void 0!==global.__NUXT_PATHS__}},{platform:a.ReactSSR,detectionMethod:function(){return e0()&&void 0!==process.env&&!!Object.keys(process.env).find(e=>e.includes("react"))}},{platform:a.VueJsSSR,detectionMethod:function(){return eY()&&e1(global,"__VUE")}},{platform:a.AngularSSR,detectionMethod:function(){return e0()&&"object"==typeof process.env&&process.env.npm_lifecycle_script?.startsWith("ng ")||!1}},{platform:a.SvelteSSR,detectionMethod:function(){return e0()&&void 0!==process.env&&!!Object.keys(process.env).find(e=>e.includes("svelte"))}}],e3=[],e4=!1,e5=()=>{if(!n){if(n=e2.find(e=>e.detectionMethod())?.platform||a.ServerSideUnknown,e4)for(;e3.length;)e3.pop()?.();else e3.forEach(e=>{e()});e8(a.ServerSideUnknown,10),e8(a.WebUnknown,10)}return n},e6=e=>{e4||e3.push(e)};function e8(e,t){n!==e||e4||setTimeout(()=>{n=void 0,e4=!0,setTimeout(e5,1e3)},t)}let e7={},e9=(e,t)=>e7[e]?.[t]?.additionalDetails,te="aws-amplify";class tt{constructor(){this.userAgent=`${te}/${eQ}`}get framework(){return e5()}get isReactNative(){return this.framework===a.ReactNative||this.framework===a.Expo}observeFrameworkChanges(e){e6(e)}}new tt;let ti=({category:e,action:t}={})=>{let i=[[te,eQ]];if(e&&i.push([e,t]),i.push(["framework",e5()]),e&&t){let n=e9(e,t);n&&n.forEach(e=>{i.push(e)})}return i},tn=e=>ti(e).map(([e,t])=>e&&t?`${e}/${t}`:e).join(" "),to="cognito-idp",tr=eK(eM,[()=>(e,t)=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),ts={service:to,endpointResolver:({region:e})=>{let t=eo.getConfig().Auth?.Cognito,i=t?.userPoolEndpoint,n=new eJ(`https://${to}.${e}.${eR(e)}`);return{url:i?new eJ(i):n}},retryDecider:ej(eE),computeDelay:eH,userAgentValue:tn(),cache:"no-store"},ta=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityProviderService.${e}`}),tu=({url:e},t,i)=>({headers:t,url:e,body:i,method:"POST"}),td=e=>(t,i)=>tu(i,ta(e),JSON.stringify(t)),tc=()=>async e=>{if(!(e.statusCode>=300))return await eP(e);{let t=await eE(e);throw e_(t),new eT({name:t.name,message:t.message})}},tl=()=>async e=>{if(e.statusCode>=300){let t=await eE(e);throw e_(t),new eT({name:t.name,message:t.message})}},th=eA(tr,td("InitiateAuth"),tc(),ts);function tg(e){if(!e||!e.includes(":"))throw new eT({name:"InvalidIdentityPoolIdException",message:"Invalid identity pool id provided.",recoverySuggestion:"Make sure a valid identityPoolId is given in the config."});return e.split(":")[0]}eA(tr,td("RevokeToken"),tc(),ts),eA(tr,td("SignUp"),tc(),ts),eA(tr,td("ConfirmSignUp"),tc(),ts),eA(tr,td("ForgotPassword"),tc(),ts),eA(tr,td("ConfirmForgotPassword"),tc(),ts),eA(tr,td("RespondToAuthChallenge"),tc(),ts),eA(tr,td("ResendConfirmationCode"),tc(),ts),eA(tr,td("VerifySoftwareToken"),tc(),ts),eA(tr,td("AssociateSoftwareToken"),tc(),ts),eA(tr,td("SetUserMFAPreference"),tc(),ts),eA(tr,td("GetUser"),tc(),ts),eA(tr,td("ChangePassword"),tc(),ts),eA(tr,td("ConfirmDevice"),tc(),ts),eA(tr,td("ForgetDevice"),tl(),ts),eA(tr,td("DeleteUser"),tl(),ts),eA(tr,td("GetUserAttributeVerificationCode"),tc(),ts),eA(tr,td("GlobalSignOut"),tc(),ts),eA(tr,td("UpdateUserAttributes"),tc(),ts),eA(tr,td("VerifyUserAttribute"),tc(),ts),eA(tr,td("UpdateDeviceStatus"),tc(),ts),eA(tr,td("ListDevices"),tc(),ts),eA(tr,td("DeleteUserAttributes"),tc(),ts);let tf="UserUnAuthenticatedException";new eT({name:"InvalidRedirectException",message:"signInRedirect or signOutRedirect had an invalid format or was not found.",recoverySuggestion:"Please make sure the signIn/Out redirect in your oauth config is valid."}),new eT({name:"InvalidOriginException",message:"redirect is coming from a different origin. The oauth flow needs to be initiated from the same origin",recoverySuggestion:"Please call signInWithRedirect from the same origin."});let tp=new eT({name:"TokenRefreshException",message:`Token refresh is not supported when authenticated with the 'implicit grant' (token) oauth flow. 
	Please change your oauth configuration to use 'code grant' flow.`,recoverySuggestion:`Please logout and change your Amplify configuration to use "code grant" flow. 
	E.g { responseType: 'code' }`}),ty=new eT({name:tf,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."}),tm={inflightOAuth:"inflightOAuth",oauthSignIn:"oauthSignIn",oauthPKCE:"oauthPKCE",oauthState:"oauthState"};function tI(e){return e?.accessToken||e?.idToken}let tw=(e=>{let t;return async(...i)=>t||(t=new Promise((n,o)=>{e(...i).then(e=>{n(e)}).catch(e=>{o(e)}).finally(()=>{t=void 0})}))})(async({tokens:e,authConfig:t,username:i})=>{eS(t?.Cognito);let n=function(e){let t=e?.split("_")[0];if(!e||0>e.indexOf("_")||!t||"string"!=typeof t)throw new eT({name:"InvalidUserPoolId",message:"Invalid user pool id provided."});return t}(t.Cognito.userPoolId);!function(e){if(tI(e)&&!e?.refreshToken)throw tp;if(!(tI(e)&&e?.refreshToken))throw ty}(e);let o=e.refreshToken,r={REFRESH_TOKEN:o};e.deviceMetadata?.deviceKey&&(r.DEVICE_KEY=e.deviceMetadata.deviceKey);let s=function({username:e,userPoolId:t,userPoolClientId:i}){if("undefined"==typeof window)return;let n=window.AmazonCognitoAdvancedSecurityData;if(void 0===n)return;let o=n.getData(e,t,i);return o?{EncodedData:o}:{}}({username:i,userPoolId:t.Cognito.userPoolId,userPoolClientId:t.Cognito.userPoolClientId}),{AuthenticationResult:a}=await th({region:n},{ClientId:t?.Cognito?.userPoolClientId,AuthFlow:"REFRESH_TOKEN_AUTH",AuthParameters:r,UserContextData:s}),u=eC(a?.AccessToken??""),d=a?.IdToken?eC(a.IdToken):void 0,{iat:c}=u.payload;if(!c)throw new eT({name:"iatNotFoundException",message:"iat not found in access token"});return{accessToken:u,idToken:d,clockDrift:1e3*c-new Date().getTime(),refreshToken:o,username:i}}),tS={accessToken:"accessToken",idToken:"idToken",oidcProvider:"oidcProvider",clockDrift:"clockDrift",refreshToken:"refreshToken",deviceKey:"deviceKey",randomPasswordKey:"randomPasswordKey",deviceGroupKey:"deviceGroupKey",signInDetails:"signInDetails"};(S||(S={})).InvalidAuthTokens="InvalidAuthTokens";let tv=eI({[S.InvalidAuthTokens]:{message:"Invalid tokens.",recoverySuggestion:"Make sure the tokens are valid."}});class tC{constructor(){this.name="CognitoIdentityServiceProvider"}getKeyValueStorage(){if(!this.keyValueStorage)throw new eT({name:"KeyValueStorageNotFoundException",message:"KeyValueStorage was not found in TokenStore"});return this.keyValueStorage}setKeyValueStorage(e){this.keyValueStorage=e}setAuthConfig(e){this.authConfig=e}async loadTokens(){try{let e=await this.getAuthKeys(),t=await this.getKeyValueStorage().getItem(e.accessToken);if(!t)throw new eT({name:"NoSessionFoundException",message:"Auth session was not found. Make sure to call signIn."});let i=eC(t),n=await this.getKeyValueStorage().getItem(e.idToken),o=n?eC(n):void 0,r=await this.getKeyValueStorage().getItem(e.refreshToken)??void 0,s=await this.getKeyValueStorage().getItem(e.clockDrift)??"0",a=Number.parseInt(s),u=await this.getKeyValueStorage().getItem(e.signInDetails),d={accessToken:i,idToken:o,refreshToken:r,deviceMetadata:await this.getDeviceMetadata()??void 0,clockDrift:a,username:await this.getLastAuthUser()};return u&&(d.signInDetails=JSON.parse(u)),d}catch(e){return null}}async storeTokens(e){tv(void 0!==e,S.InvalidAuthTokens),await this.clearTokens();let t=e.username;await this.getKeyValueStorage().setItem(this.getLastAuthUserKey(),t);let i=await this.getAuthKeys();await this.getKeyValueStorage().setItem(i.accessToken,e.accessToken.toString()),e.idToken&&await this.getKeyValueStorage().setItem(i.idToken,e.idToken.toString()),e.refreshToken&&await this.getKeyValueStorage().setItem(i.refreshToken,e.refreshToken),e.deviceMetadata&&(e.deviceMetadata.deviceKey&&await this.getKeyValueStorage().setItem(i.deviceKey,e.deviceMetadata.deviceKey),e.deviceMetadata.deviceGroupKey&&await this.getKeyValueStorage().setItem(i.deviceGroupKey,e.deviceMetadata.deviceGroupKey),await this.getKeyValueStorage().setItem(i.randomPasswordKey,e.deviceMetadata.randomPassword)),e.signInDetails&&await this.getKeyValueStorage().setItem(i.signInDetails,JSON.stringify(e.signInDetails)),await this.getKeyValueStorage().setItem(i.clockDrift,`${e.clockDrift}`)}async clearTokens(){let e=await this.getAuthKeys();await Promise.all([this.getKeyValueStorage().removeItem(e.accessToken),this.getKeyValueStorage().removeItem(e.idToken),this.getKeyValueStorage().removeItem(e.clockDrift),this.getKeyValueStorage().removeItem(e.refreshToken),this.getKeyValueStorage().removeItem(e.signInDetails),this.getKeyValueStorage().removeItem(this.getLastAuthUserKey())])}async getDeviceMetadata(e){let t=await this.getAuthKeys(e),i=await this.getKeyValueStorage().getItem(t.deviceKey),n=await this.getKeyValueStorage().getItem(t.deviceGroupKey),o=await this.getKeyValueStorage().getItem(t.randomPasswordKey);return o&&n&&i?{deviceKey:i,deviceGroupKey:n,randomPassword:o}:null}async clearDeviceMetadata(e){let t=await this.getAuthKeys(e);await Promise.all([this.getKeyValueStorage().removeItem(t.deviceKey),this.getKeyValueStorage().removeItem(t.deviceGroupKey),this.getKeyValueStorage().removeItem(t.randomPasswordKey)])}async getAuthKeys(e){eS(this.authConfig?.Cognito);let t=e??await this.getLastAuthUser();return tA(this.name,`${this.authConfig.Cognito.userPoolClientId}.${t}`)}getLastAuthUserKey(){eS(this.authConfig?.Cognito);let e=this.authConfig.Cognito.userPoolClientId;return`${this.name}.${e}.LastAuthUser`}async getLastAuthUser(){return await this.getKeyValueStorage().getItem(this.getLastAuthUserKey())??"username"}}let tA=(e,t)=>tk(tS)(`${e}`,t);function tk(e){let t=Object.values({...e});return(e,i)=>t.reduce((t,n)=>({...t,[n]:`${e}.${i}.${n}`}),{})}let tb=()=>"undefined"!=typeof window&&void 0!==window.document,tE="amplify-signin-with-hostedUI",tP="CognitoIdentityServiceProvider";class tT{constructor(e){this.keyValueStorage=e}async clearOAuthInflightData(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId);await Promise.all([this.keyValueStorage.removeItem(e.inflightOAuth),this.keyValueStorage.removeItem(e.oauthPKCE),this.keyValueStorage.removeItem(e.oauthState)])}async clearOAuthData(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId);return await this.clearOAuthInflightData(),await this.keyValueStorage.removeItem(tE),this.keyValueStorage.removeItem(e.oauthSignIn)}loadOAuthState(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthState)}storeOAuthState(e){eS(this.cognitoConfig);let t=t_(tP,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthState,e)}loadPKCE(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.getItem(e.oauthPKCE)}storePKCE(e){eS(this.cognitoConfig);let t=t_(tP,this.cognitoConfig.userPoolClientId);return this.keyValueStorage.setItem(t.oauthPKCE,e)}setAuthConfig(e){this.cognitoConfig=e}async loadOAuthInFlight(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId);return await this.keyValueStorage.getItem(e.inflightOAuth)==="true"}async storeOAuthInFlight(e){eS(this.cognitoConfig);let t=t_(tP,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(t.inflightOAuth,`${e}`)}async loadOAuthSignIn(){eS(this.cognitoConfig);let e=t_(tP,this.cognitoConfig.userPoolClientId),t=await this.keyValueStorage.getItem(tE),[i,n]=(await this.keyValueStorage.getItem(e.oauthSignIn))?.split(",")??[];return{isOAuthSignIn:"true"===i||"true"===t,preferPrivateSession:"true"===n}}async storeOAuthSignIn(e,t=!1){eS(this.cognitoConfig);let i=t_(tP,this.cognitoConfig.userPoolClientId);await this.keyValueStorage.setItem(i.oauthSignIn,`${e},${t}`)}}let t_=(e,t)=>tk(tm)(e,t),tx=new tT(ep),tO=[],tR=e=>{tO.push(e)};class tU{constructor(){this.waitForInflightOAuth=tb()?async()=>await tx.loadOAuthInFlight()?(this.inflightPromise||(this.inflightPromise=new Promise((e,t)=>{tR(e)})),this.inflightPromise):void 0:async()=>{}}setAuthConfig(e){tx.setAuthConfig(e.Cognito),this.authConfig=e}setTokenRefresher(e){this.tokenRefresher=e}setAuthTokenStore(e){this.tokenStore=e}getTokenStore(){if(!this.tokenStore)throw new eT({name:"EmptyTokenStoreException",message:"TokenStore not set"});return this.tokenStore}getTokenRefresher(){if(!this.tokenRefresher)throw new eT({name:"EmptyTokenRefresherException",message:"TokenRefresher not set"});return this.tokenRefresher}async getTokens(e){let t;try{eS(this.authConfig?.Cognito)}catch(e){return null}await this.waitForInflightOAuth(),this.inflightPromise=void 0,t=await this.getTokenStore().loadTokens();let i=await this.getTokenStore().getLastAuthUser();if(null===t)return null;let n=!!t?.idToken&&W({expiresAt:(t.idToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0}),o=W({expiresAt:(t.accessToken?.payload?.exp??0)*1e3,clockDrift:t.clockDrift??0});return(e?.forceRefresh||n||o)&&null===(t=await this.refreshTokens({tokens:t,username:i}))?null:{accessToken:t?.accessToken,idToken:t?.idToken,signInDetails:t?.signInDetails}}async refreshTokens({tokens:e,username:t}){try{let{signInDetails:i}=e,n=await this.getTokenRefresher()({tokens:e,authConfig:this.authConfig,username:t});return n.signInDetails=i,await this.setTokens({tokens:n}),N.dispatch("auth",{event:"tokenRefresh"},"Auth",O),n}catch(e){return this.handleErrors(e)}}handleErrors(e){if(e_(e),"Network error"!==e.message&&this.clearTokens(),N.dispatch("auth",{event:"tokenRefresh_failure",data:{error:e}},"Auth",O),e.name.startsWith("NotAuthorizedException"))return null;throw e}async setTokens({tokens:e}){return this.getTokenStore().storeTokens(e)}async clearTokens(){return this.getTokenStore().clearTokens()}getDeviceMetadata(e){return this.getTokenStore().getDeviceMetadata(e)}clearDeviceMetadata(e){return this.getTokenStore().clearDeviceMetadata(e)}}class tN{constructor(){this.authTokenStore=new tC,this.authTokenStore.setKeyValueStorage(ep),this.tokenOrchestrator=new tU,this.tokenOrchestrator.setAuthTokenStore(this.authTokenStore),this.tokenOrchestrator.setTokenRefresher(tw)}getTokens({forceRefresh:e}={forceRefresh:!1}){return this.tokenOrchestrator.getTokens({forceRefresh:e})}setKeyValueStorage(e){this.authTokenStore.setKeyValueStorage(e)}setAuthConfig(e){this.authTokenStore.setAuthConfig(e),this.tokenOrchestrator.setAuthConfig(e)}}let tL=new tN,{tokenOrchestrator:tK}=tL,tD={identityId:"identityId"},tV=new _("DefaultIdentityIdStore");class tM{setAuthConfig(e){ev(e.Cognito),this.authConfig=e,this._authKeys=tG("Cognito",e.Cognito.identityPoolId)}constructor(e){this._authKeys={},this.keyValueStorage=e}async loadIdentityId(){ev(this.authConfig?.Cognito);try{if(this._primaryIdentityId)return{id:this._primaryIdentityId,type:"primary"};{let e=await this.keyValueStorage.getItem(this._authKeys.identityId);if(e)return{id:e,type:"guest"};return null}}catch(e){return tV.log("Error getting stored IdentityId.",e),null}}async storeIdentityId(e){ev(this.authConfig?.Cognito),"guest"===e.type?(this.keyValueStorage.setItem(this._authKeys.identityId,e.id),this._primaryIdentityId=void 0):(this._primaryIdentityId=e.id,this.keyValueStorage.removeItem(this._authKeys.identityId))}async clearIdentityId(){this._primaryIdentityId=void 0,await this.keyValueStorage.removeItem(this._authKeys.identityId)}}let tG=(e,t)=>tk(tD)(`com.amplify.${e}`,t),t$=eK(eM,[()=>e=>async function(t){return t.headers["cache-control"]="no-store",e(t)}]),tj={service:"cognito-identity",endpointResolver:({region:e})=>({url:new eJ(`https://cognito-identity.${e}.${eR(e)}`)}),retryDecider:ej(eE),computeDelay:eH,userAgentValue:tn(),cache:"no-store"};e6(()=>{tj.userAgentValue=tn()});let tF=e=>({"content-type":"application/x-amz-json-1.1","x-amz-target":`AWSCognitoIdentityService.${e}`}),tq=({url:e},t,i)=>({headers:t,url:e,body:i,method:"POST"}),tB=({AccessKeyId:e,SecretKey:t,SessionToken:i,Expiration:n}={})=>({AccessKeyId:e,SecretKey:t,SessionToken:i,Expiration:n&&new Date(1e3*n)}),tW=eA(t$,(e,t)=>tq(t,tF("GetCredentialsForIdentity"),JSON.stringify(e)),async e=>{if(e.statusCode>=300)throw await eE(e);{let t=await eP(e);return{IdentityId:t.IdentityId,Credentials:tB(t.Credentials),$metadata:ek(e)}}},tj),tz=eA(t$,(e,t)=>tq(t,tF("GetId"),JSON.stringify(e)),async e=>{if(!(e.statusCode>=300))return{IdentityId:(await eP(e)).IdentityId,$metadata:ek(e)};throw await eE(e)},tj);function tH(e){let t=eC(e).payload.iss,i={};if(!t)throw new eT({name:"InvalidIdTokenException",message:"Invalid Idtoken."});return i[t.replace(/(^\w+:|^)\/\//,"")]=e,i}let tJ=new _("CognitoIdentityIdProvider");async function tQ({tokens:e,authConfig:t,identityIdStore:i}){i.setAuthConfig({Cognito:t});let n=await i.loadIdentityId();if(e){if(n&&"primary"===n.type)return n.id;{let i=e.idToken?tH(e.idToken.toString()):{},o=await tY(i,t);n&&n.id===o&&tJ.debug(`The guest identity ${n.id} has become the primary identity.`),n={id:o,type:"primary"}}}else{if(n&&"guest"===n.type)return n.id;n={id:await tY({},t),type:"guest"}}return i.storeIdentityId(n),n.id}async function tY(e,t){let i=t?.identityPoolId,n=tg(i),o=(await tz({region:n},{IdentityPoolId:i,Logins:e})).IdentityId;if(!o)throw new eT({name:"GetIdResponseException",message:"Received undefined response from getId operation",recoverySuggestion:"Make sure to pass a valid identityPoolId in the configuration."});return o}let tX=new _("CognitoCredentialsProvider");class tZ{constructor(e){this._nextCredentialsRefresh=0,this._identityIdStore=e}async clearCredentialsAndIdentityId(){tX.debug("Clearing out credentials and identityId"),this._credentialsAndIdentityId=void 0,await this._identityIdStore.clearIdentityId()}async clearCredentials(){tX.debug("Clearing out in-memory credentials"),this._credentialsAndIdentityId=void 0}async getCredentialsAndIdentityId(e){let t=e.authenticated,{tokens:i}=e,{authConfig:n}=e;try{ev(n?.Cognito)}catch{return}if(!t&&!n.Cognito.allowGuestAccess)return;let{forceRefresh:o}=e,r=this.hasTokenChanged(i),s=await tQ({tokens:i,authConfig:n.Cognito,identityIdStore:this._identityIdStore});return((o||r)&&this.clearCredentials(),t)?(function(e){if(!e||!e.idToken)throw new eT({name:tf,message:"User needs to be authenticated to call this API.",recoverySuggestion:"Sign in before calling this API again."})}(i),this.credsForOIDCTokens(n.Cognito,i,s)):this.getGuestCredentials(s,n.Cognito)}async getGuestCredentials(e,t){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!1===this._credentialsAndIdentityId.isAuthenticatedCreds)return tX.info("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let i=tg(t.identityPoolId),n=await tW({region:i},{IdentityId:e});if(n.Credentials&&n.Credentials.AccessKeyId&&n.Credentials.SecretKey){this._nextCredentialsRefresh=new Date().getTime()+3e6;let t={credentials:{accessKeyId:n.Credentials.AccessKeyId,secretAccessKey:n.Credentials.SecretKey,sessionToken:n.Credentials.SessionToken,expiration:n.Credentials.Expiration},identityId:e},i=n.IdentityId;return i&&(t.identityId=i,this._identityIdStore.storeIdentityId({id:i,type:"guest"})),this._credentialsAndIdentityId={...t,isAuthenticatedCreds:!1},t}throw new eT({name:"CredentialsNotFoundException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}async credsForOIDCTokens(e,t,i){if(this._credentialsAndIdentityId&&!this.isPastTTL()&&!0===this._credentialsAndIdentityId.isAuthenticatedCreds)return tX.debug("returning stored credentials as they neither past TTL nor expired."),this._credentialsAndIdentityId;this.clearCredentials();let n=t.idToken?tH(t.idToken.toString()):{},o=tg(e.identityPoolId),r=await tW({region:o},{IdentityId:i,Logins:n});if(r.Credentials&&r.Credentials.AccessKeyId&&r.Credentials.SecretKey){let e={credentials:{accessKeyId:r.Credentials.AccessKeyId,secretAccessKey:r.Credentials.SecretKey,sessionToken:r.Credentials.SessionToken,expiration:r.Credentials.Expiration},identityId:i};this._credentialsAndIdentityId={...e,isAuthenticatedCreds:!0,associatedIdToken:t.idToken?.toString()},this._nextCredentialsRefresh=new Date().getTime()+3e6;let n=r.IdentityId;return n&&(e.identityId=n,this._identityIdStore.storeIdentityId({id:n,type:"primary"})),e}throw new eT({name:"CredentialsException",message:"Cognito did not respond with either Credentials, AccessKeyId or SecretKey."})}isPastTTL(){return void 0===this._nextCredentialsRefresh||this._nextCredentialsRefresh<=Date.now()}hasTokenChanged(e){return!!e&&!!this._credentialsAndIdentityId?.associatedIdToken&&e.idToken?.toString()!==this._credentialsAndIdentityId.associatedIdToken}}let t0=new tZ(new tM(ep));async function t1(e){let t=new E.PrismaClient,i=await (0,P.T)(e);if(!i)return b.NextResponse.json(null,{status:401});let n=await t.task.findMany({where:{createdBy:i.sub},orderBy:[{dueDate:"desc"}]});return b.NextResponse.json(n)}async function t2(e){let t=new E.PrismaClient,{title:i,status:n,priority:o,dueDate:r,file:s}=await e.json(),a=await (0,P.T)(e);if(!a)return b.NextResponse.json(null,{status:401});let u={title:i,status:n,priority:o,dueDate:r,createdBy:a.sub,file:s},d=await t.task.create({data:u});return b.NextResponse.json(d,{status:201})}({configure(e,t){let i=B(e);if(!i.Auth||t?.Auth){eo.configure(i,t);return}if(!eo.libraryOptions.Auth){tL.setAuthConfig(i.Auth),tL.setKeyValueStorage(t?.ssr?new ea({sameSite:"lax"}):ep),eo.configure(i,{...t,Auth:{tokenProvider:tL,credentialsProvider:t0}});return}if(t){void 0!==t.ssr&&tL.setKeyValueStorage(t.ssr?new ea({sameSite:"lax"}):ep),eo.configure(i,{Auth:eo.libraryOptions.Auth,...t});return}eo.configure(i)},getConfig:()=>eo.getConfig()}).configure({Auth:{Cognito:{identityPoolId:"ap-southeast-1:3f9db4f5-a5b5-45d4-8d86-bb2dc899ea5e",userPoolId:"ap-southeast-1_JY7dzNgUH",userPoolClientId:"q0c4spc84ackfl38obkg2faui",signUpVerificationMethod:"code",loginWith:{username:!0,email:!1,phone:!1}}},API:{REST:{}},Storage:{S3:{bucket:"task-manager-asset",region:"ap-southeast-1"}}});let t3=new C.AppRouteRouteModule({definition:{kind:A.x.APP_ROUTE,page:"/api/tasks/route",pathname:"/api/tasks",filename:"route",bundlePath:"app/api/tasks/route"},resolvedPagePath:"/Users/devanhduy/Desktop/Freelancer/aws-task-manager/src/app/api/tasks/route.ts",nextConfigOutput:"",userland:v}),{requestAsyncStorage:t4,staticGenerationAsyncStorage:t5,serverHooks:t6}=t3,t8="/api/tasks/route";function t7(){return(0,k.patchFetch)({serverHooks:t6,staticGenerationAsyncStorage:t5})}},94458:(e,t,i)=>{i.d(t,{T:()=>r});var n=i(41482),o=i.n(n);let r=async e=>{try{let t=e.headers.get("Authorization");if(!t)return null;return t=t.replace("Bearer ",""),o().decode(t)}catch(e){return console.error("Error verifying token:",e),null}}}};var t=require("../../../webpack-runtime.js");t.C(e);var i=e=>t(t.s=e),n=t.X(0,[948,547],()=>i(88364));module.exports=n})();